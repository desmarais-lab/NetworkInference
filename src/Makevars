$(info The name of the shared library to be created is: $(SHLIB))

PKG_CPPFLAGS +=  -Itest_lib/ -Itest_lib/test_support/
PKG_LIBS += -L../inst -lsupport

SOURCES= netinf_wrap.cpp RcppExports.cpp
OBJECTS= $(SOURCES:.cpp=.o)

SOURCES_SUPP= ./RcppExports.cpp ./netinf_wrap.cpp ./test_lib/test.cpp \
	./test_lib/test_support/test_support_functions.cpp
OBJECTS_SUPP = $(SOURCES_SUPP:.cpp=.o)

all: $(SHLIB) ../inst/libsupport.a

$(SHLIB): $(OBJECTS) ../inst/libsupport.a

../inst/libsupport.a: $(OBJECTS_SUPP)
	ar -rvs ../inst/libsupport.a $(OBJECTS_SUPP)
